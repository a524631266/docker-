# docker-

docker 物理大小
 docker是轻量打，不像虚拟机一样拥有全套系统资源，而docker只是拥有基础业务运行打环境就可以了。而ubuntu基础镜像只需要170m

# 三大概念
 - 1.) 镜像 软件赖以生存打基础环境 (类)
 - 2.) 容器 软件所需打最低资源环境 (对象 镜像的创建打对象)
 - 3.) 仓库 web/service管理docker镜像/项目/代码 pull push
 


学习docker的生命周期
- 1. docker 镜像
    - 镜像是基于 bootfs/rootfs/otherfs的**只读**文件系统配置,一般docker用户不会与镜像进行直接的操作,**(有点类似于linux系统启动与root文件系统一样,在一般的情况下,是不会对内核进行操作的,否则崩掉了,那就要晾凉了)**
    - ***比喻*** : 镜像也是**容器**的基石,或者硬条件,如果把人比作容器,那么镜像就是我们赖以生存的粮食,没有粮食-人无法存活
    - 在docker生命周期中的**打包**和**配置** 
    - 基本构建
      + 1)  bootfs 
      + 2)  rootfs
      + 3)  add emacs
      + 4)  add apache
      + 5)  others
    - 联合加载(union mount):即一次加载多个文件系统,但是表面上来看就是一个系统
    - 镜像可以互相叠加,一个镜像可以成为另一镜像的底部,最下方的镜像就是基础镜像 rootfs
- 2. docker 容器
    - docker需要通过镜像才能启动
    - ***比喻*** : 容器就是人
    - 在docker生命中的 启动与执行阶段
    - 如何启动?
      + 在镜像层最顶层 添加一个可读写层
      + 用户第一次启动的时候,初始化一个空(null)可读写层,
      + 当文件系统(boot/root))发生变化的时候,这些变化都会应用到该层
    - 写时复制 (copy on write)
      + 当文件系统中的某个文件被修改,那么
       ++ 首先 在该可读层下面的只读层中copy一份到可读层中,然后 该只读层中的文件被可读层中的文件所隐藏(并不是消失,依然存在最初的版本)

```
 这样可读层的写时复制以及镜像的分层构架,快速构建镜像,以及运行我们自己的应用项目\服务
```
- 3. docker [守护进程](基本命令/一次性运行命令.md) 
   - 守护进程是主服务构建一个docker容器的主线程,docker用户对容器的使用,docker pull /docker run ..都是与守护进程进行交互的,也就是用户与容器的一个通道
   - ***比喻*** 粮仓的门
- 4. docker 仓库 repository
    - 仓库是用来存储各种镜像(文件配置),在大仓库中有很多粮食,这些粮食就是镜像,那么,我这里就把仓库比作粮仓.
    - 共有 
    - 私有
    - Docker Hub
         docker 在线演示
    -    [官方在线演示](https://www.docker.com/tryit/ )
  5. registry 仓库存储服务
    - 这个是用来服务于仓库(repository),即包含了很多repository仓库

# docker利用linux内核中的两大特性

- namespace 命名空间
  + 封装
- cgroups (控制组 contral groups)
  + 管理